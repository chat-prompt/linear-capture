# Linear Capture ê²€ìƒ‰ í¸ì¤‘ ë¬¸ì œ ë¶„ì„ ë° ê°œì„ ì•ˆ

## í˜„ì¬ ìƒí™© ìš”ì•½

### ë°°ê²½
- **ê¸°ì¡´ ê³„íš**: `search-quality-improvement.md` (5 Task, ê²€ìƒ‰ í’ˆì§ˆ 50%+ í–¥ìƒ ëª©í‘œ)
- **ìƒˆ ë°œê²¬**: Worktree ì‘ì—… ì¤‘ ì†ŒìŠ¤ ê°„ í¸ì¤‘ ë¬¸ì œ ë°œê²¬
- **í•µì‹¬ ì§ˆë¬¸**: ê¸°ì¡´ ê³„íšëŒ€ë¡œ ì§„í–‰ vs í¸ì¤‘ ë¬¸ì œ ë¨¼ì € í•´ê²°

---

## í˜„ì¬ ê²€ìƒ‰ ì•„í‚¤í…ì²˜

```
Query ì…ë ¥
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì „ì²˜ë¦¬ (text-preprocessor.ts)                       â”‚
â”‚    - URL ì •ê·œí™”, ì´ëª¨ì§€ ì œê±°, ë§ˆí¬ë‹¤ìš´ ì •ë¦¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (local-search.ts)                   â”‚
â”‚    â”œâ”€â”€ Semantic Search: pgvector ì½”ì‚¬ì¸ ìœ ì‚¬ë„         â”‚
â”‚    â””â”€â”€ Keyword Search: PostgreSQL FTS (tsvector)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. RRF ë³‘í•© (Reciprocal Rank Fusion, k=60)            â”‚
â”‚    - Keyword-only ê²°ê³¼ â†’ 0.3 ê³ ì • ì ìˆ˜ (ë¬¸ì œ!)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
  ìµœì¢… ê²°ê³¼ ë°˜í™˜
```

### ë¯¸êµ¬í˜„ í•­ëª© (ê¸°ì¡´ ê³„íš)
- `recency-boost.ts` - 14ì¼ ë°˜ê°ê¸° ì§€ìˆ˜ ê°ì‡ 
- `text-chunker.ts` - ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ì²­í‚¹
- `reranker.ts` - Cohere Rerank API ì—°ë™
- Worker `/rerank` ì—”ë“œí¬ì¸íŠ¸

---

## ë°œê²¬ëœ í¸ì¤‘ ë¬¸ì œ

### 1. Slack ê²€ìƒ‰/ë™ê¸°í™” ì¼ê´€ì„± ë¶ˆì¼ì¹˜ ğŸ”´

| ë™ì‘ | Slack Sync | Slack Search |
|------|-----------|--------------|
| ì±„ë„ ë¯¸ì„ íƒ ì‹œ | âœ… ì „ì²´ public ì±„ë„ ë™ê¸°í™” | âŒ **Slack ì™„ì „ ì œì™¸** |

**ë¬¸ì œ ìœ„ì¹˜**:
```typescript
// local-search.ts - semanticSearch(), keywordSearch(), likeSearch() ëª¨ë‘ ë™ì¼
const selectedChannels = getSelectedSlackChannels();
if (selectedChannels.length > 0) {
  // ì„ íƒëœ ì±„ë„ë§Œ ê²€ìƒ‰
} else {
  conditions.push(`source_type != 'slack'`);  // âš ï¸ Slack ì™„ì „ ì œì™¸
}
```

**ì˜í–¥**: ì‚¬ìš©ìê°€ ì±„ë„ì„ ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ ë™ê¸°í™”ëœ Slack ë°ì´í„°ê°€ ê²€ìƒ‰ ê²°ê³¼ì— ë‚˜íƒ€ë‚˜ì§€ ì•ŠìŒ.

---

### 2. Keyword-only 0.3 íŒ¨ë„í‹° ğŸ”´

**ë¬¸ì œ ìœ„ì¹˜**:
```typescript
// local-search.ts line 443-446
keyword.forEach((result, index) => {
  // ...
  if (!resultMap.has(result.id)) {
    semanticScores.set(result.id, 0.3); // âš ï¸ í•˜ë“œì½”ë”©ëœ ë‚®ì€ ì ìˆ˜
  }
});
```

**ì˜í–¥**: 
- Semantic ê²€ìƒ‰ì—ì„œ ì•ˆ ë‚˜ì˜¤ê³  Keywordì—ì„œë§Œ ë§¤ì¹­ëœ ê²°ê³¼ = 0.3 ê³ ì • ì ìˆ˜
- ì§§ì€ Slack ë©”ì‹œì§€ëŠ” semantic ë§¤ì¹­ì´ ì•½í•´ì„œ keyword-onlyê°€ ë§ìŒ
- â†’ **Slackì´ ì²´ê³„ì ìœ¼ë¡œ ë¶ˆë¦¬**

**ì¶”ê°€ ìœ„í—˜**:
- ê³„íšëœ `applyRecencyBoost()`ê°€ ì´ 0.3ì„ "ë‚®ì€ í’ˆì§ˆ"ë¡œ í•´ì„
- â†’ RecencyBoostë¥¼ ì ìš©í•´ë„ Slackì´ ì—¬ì „íˆ ë¶ˆë¦¬

---

### 3. FTS Title ê°€ì¤‘ì¹˜ ë¶ˆê· í˜• ğŸŸ¡

**ë¬¸ì œ ìœ„ì¹˜**:
```sql
-- database.ts line 137-139
tsv tsvector GENERATED ALWAYS AS (
  setweight(to_tsvector('simple', coalesce(title, '')), 'A') ||  -- Title: ë†’ì€ ê°€ì¤‘ì¹˜
  setweight(to_tsvector('simple', content), 'B')                 -- Content: ë‚®ì€ ê°€ì¤‘ì¹˜
) STORED
```

**ì†ŒìŠ¤ë³„ Title íŠ¹ì„±**:

| ì†ŒìŠ¤ | Title í˜•íƒœ | FTS 'A' ê°€ì¤‘ì¹˜ í˜œíƒ |
|------|-----------|:------------------:|
| Notion | í˜ì´ì§€ ì œëª© (ì˜ë¯¸ ìˆìŒ) | âœ… ë†’ìŒ |
| Linear | ì´ìŠˆ ì œëª© (ì˜ë¯¸ ìˆìŒ) | âœ… ë†’ìŒ |
| Slack | `#ì±„ë„ëª… - ì‚¬ìš©ìëª…` (ìë™ ìƒì„±) | âŒ ë‚®ìŒ |
| Gmail | ì´ë©”ì¼ ì œëª© (ì˜ë¯¸ ìˆìŒ) | âœ… ë†’ìŒ |

**Slack Title ìƒì„± ìœ„ì¹˜**:
```typescript
// slack-sync.ts ~line 405
title: `#${channelName} - ${userName}`  // ê²€ìƒ‰ í‚¤ì›Œë“œ ë§¤ì¹­ ì–´ë ¤ì›€
```

---

### 4. ë¬¸ì„œ ê¸¸ì´ & Semantic ê²€ìƒ‰ í¸í–¥ ğŸŸ¡

| ì†ŒìŠ¤ | ë¬¸ì„œ íŠ¹ì„± | Semantic ì˜í–¥ |
|------|----------|---------------|
| Notion | ê¸´ ë¬¸ì„œ (5000ì ì œí•œ) | ì„ë² ë”©ì´ í‰ê· í™” â†’ íŠ¹ì • í‚¤ì›Œë“œ ë§¤ì¹­ ì•½í•´ì§ |
| Slack | ì§§ì€ ë©”ì‹œì§€ | ì„ë² ë”© ë°€ë„ ë†’ìŒ â†’ í‚¤ì›Œë“œ ë§¤ì¹­ ê°•í•¨ |

**ì—­ì„¤**: ì§§ì€ Slack ë©”ì‹œì§€ê°€ semanticì—ì„œ ê°•í•  ìˆ˜ ìˆì§€ë§Œ, keyword-only 0.3 íŒ¨ë„í‹°ë¡œ ìƒì‡„ë¨.

---

### 5. ì§§ì€ ì¿¼ë¦¬ (â‰¤3ì) í¸í–¥ ğŸŸ¡

**ë¬¸ì œ ìœ„ì¹˜**:
```typescript
// local-search.ts line 314-316
if (query.length <= 3) {
  console.log(`[LocalSearch] Short query "${query}" - using LIKE search`);
  return this.likeSearch(query, limit, source);
}

// likeSearch() line 411
ORDER BY source_created_at DESC  // âš ï¸ ê´€ë ¨ì„± ë¬´ê´€, ìµœì‹ ìˆœë§Œ
```

**ì˜í–¥**: 3ì ì´í•˜ ê²€ìƒ‰ì–´ â†’ 100% ìµœì‹  ë¬¸ì„œ ìš°ì„  â†’ Slack ìœ ë¦¬ (ì‹¤ì‹œê°„ íŠ¹ì„±)

---

### 6. ê³„íšëœ ê¸°ëŠ¥ì˜ í¸ì¤‘ ì˜í–¥

| ê³„íšëœ ê¸°ëŠ¥ | ì˜ˆìƒ ì˜í–¥ | ì„¤ëª… |
|------------|:--------:|------|
| RecencyBoost (14ì¼) | Slack â†‘ | ìµœì‹  ë©”ì‹œì§€ê°€ ë§ì€ Slackì— ìœ ë¦¬ |
| Reranker (Cohere) | Notion/Linear â†‘ | ê¸´ ë¬¸ì„œ + í’ë¶€í•œ ì»¨í…ìŠ¤íŠ¸ ì„ í˜¸ |
| Chunking | ì¤‘ë¦½í™” | ë¬¸ì„œ ê¸¸ì´ ì •ê·œí™”ë¡œ ê³µì •ì„± ê°œì„  |

**ìœ„í—˜**: RecencyBoostì™€ Rerankerê°€ ì„œë¡œ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ì‘ìš© â†’ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ê²°ê³¼

---

## í¸ì¤‘ íë¦„ë„

```
ê²€ìƒ‰ ì¿¼ë¦¬ ì…ë ¥
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 1: Slack ì±„ë„ ë¯¸ì„ íƒ â†’ Slack ì™„ì „ ì œì™¸ ğŸ”´        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 2: Semantic Search                               â”‚
â”‚   - ê¸´ ë¬¸ì„œ(Notion): í‰ê· í™”ëœ ì„ë² ë”© â†’ íŠ¹ì • ë§¤ì¹­ ì•½í•¨   â”‚
â”‚   - ì§§ì€ ë©”ì‹œì§€(Slack): ë°€ë„ ë†’ì€ ì„ë² ë”© â†’ ë§¤ì¹­ ê°•í•¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 3: Keyword Search (FTS)                          â”‚
â”‚   - Title 'A' ê°€ì¤‘ì¹˜: Notion/Linear ìœ ë¦¬ ğŸŸ¡            â”‚
â”‚   - Slack ì œëª©ì€ "#ì±„ë„-ì‚¬ìš©ì" â†’ ë§¤ì¹­ ì–´ë ¤ì›€           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 4: RRF ë³‘í•©                                      â”‚
â”‚   - Keyword-only ê²°ê³¼ â†’ 0.3 ê³ ì • ì ìˆ˜ ğŸ”´               â”‚
â”‚   - Slackì´ ì²´ê³„ì ìœ¼ë¡œ ë¶ˆì´ìµ                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 5 (ê³„íš): Reranker                               â”‚
â”‚   - ê¸´ ë¬¸ì„œ ì„ í˜¸ â†’ Notion/Linear ìœ ë¦¬                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stage 6 (ê³„íš): RecencyBoost                           â”‚
â”‚   - 14ì¼ ë°˜ê°ê¸° â†’ ìµœì‹  Slack ìœ ë¦¬                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
  ìµœì¢… ê²°ê³¼ (ì–´ëŠ ë‹¨ê³„ê°€ ì§€ë°°í•˜ëŠëƒì— ë”°ë¼ ê²°ê³¼ ë‹¬ë¼ì§)
```

---

## Oracle ì•„í‚¤í…ì²˜ ìƒë‹´ ê²°ê³¼

### í•µì‹¬ ê¶Œê³ 

> **"ê¸°ì¡´ ê³„íšëŒ€ë¡œ Reranker + RecencyBoostë¥¼ ì¶”ê°€í•˜ë©´, í˜„ì¬ ìˆ¨ê²¨ì§„ í¸ì¤‘(0.3 íŒ¨ë„í‹°, Slack ì œì™¸)ì´ ì¦í­ë˜ì–´ ë‚˜ì¤‘ì— ë””ë²„ê¹…/íŠœë‹ì´ ë” ì–´ë ¤ì›Œì§"**

### ê¶Œì¥ ì ‘ê·¼ë²•: Option B

ê¸°ì¡´ ê³„íšì„ ì§„í–‰í•˜ë˜, **"í¸ì¤‘ ìˆ˜ì • ë ˆì´ì–´"ë¥¼ ë¨¼ì € ì¶”ê°€**

---

## ê°œì„ ì•ˆ

### Wave 0: í¸ì¤‘ ê¸°ì´ˆ ìˆ˜ì • (ìƒˆë¡œ ì¶”ê°€, ~4ì‹œê°„)

#### Task 0-A: Slack ê²€ìƒ‰/ë™ê¸°í™” ì¼ê´€ì„± ìˆ˜ì • (1ì‹œê°„)

**í˜„ì¬ ë¬¸ì œ**:
- Sync: ì±„ë„ ë¯¸ì„ íƒ â†’ ì „ì²´ public ì±„ë„ ë™ê¸°í™”
- Search: ì±„ë„ ë¯¸ì„ íƒ â†’ Slack ì™„ì „ ì œì™¸

**í•´ê²° ë°©ì•ˆ** (ë‘˜ ì¤‘ í•˜ë‚˜ ì„ íƒ):
1. **Option 1 (Sync ë”°ë¼ê°€ê¸°)**: Searchë„ ì±„ë„ ë¯¸ì„ íƒ ì‹œ ì „ì²´ Slack í¬í•¨
2. **Option 2 (Search ë”°ë¼ê°€ê¸°)**: Syncë„ ì„ íƒëœ ì±„ë„ë§Œ ë™ê¸°í™”

**ê¶Œì¥**: Option 1 - ì‚¬ìš©ìê°€ ë™ê¸°í™”í•œ ë°ì´í„°ëŠ” ê²€ìƒ‰ ê°€ëŠ¥í•´ì•¼ í•¨

**ìˆ˜ì • ìœ„ì¹˜**: `local-search.ts` - `semanticSearch()`, `keywordSearch()`, `likeSearch()`

---

#### Task 0-B: 0.3 í•˜ë“œì½”ë”© ì œê±° (30ë¶„)

**í˜„ì¬ ì½”ë“œ**:
```typescript
// local-search.ts line 445
semanticScores.set(result.id, 0.3);
```

**í•´ê²° ë°©ì•ˆ**:
```typescript
// RRF ì ìˆ˜ë¥¼ ì •ê·œí™”í•˜ì—¬ ì‚¬ìš©
const normalizedRRF = rrfScores.get(result.id)! / maxRRFScore;
semanticScores.set(result.id, normalizedRRF);
```

ë˜ëŠ” keyword ê²°ê³¼ì˜ `ts_rank_cd` ê°’ì„ ì •ê·œí™”í•˜ì—¬ ì‚¬ìš©.

---

#### Task 0-C: ì†ŒìŠ¤ë³„ ê· í˜• í›„ë³´ ê²€ìƒ‰ (1ì‹œê°„)

**í˜„ì¬**: ê° ì±„ë„ì—ì„œ ìƒìœ„ 100ê°œ ì „ì²´ ê²€ìƒ‰ â†’ ê¸´ ë¬¸ì„œê°€ ë§ìœ¼ë©´ Slack ë°€ë¦¼

**í•´ê²°**:
```typescript
// ê° ì†ŒìŠ¤ë³„ 40ê°œì”© ê· ë“± ê²€ìƒ‰
const RETRIEVAL_PER_SOURCE = 40;
const sources = ['notion', 'slack', 'linear', 'gmail'];

// ì†ŒìŠ¤ë³„ë¡œ ê²€ìƒ‰ í›„ ë³‘í•©
const semanticBySource = await Promise.all(
  sources.map(s => this.semanticSearch(queryEmbedding, RETRIEVAL_PER_SOURCE, s))
);
```

---

#### Task 0-D: Slack ì¸ë±ì‹± ì‹œ Title ì²˜ë¦¬ (1ì‹œê°„)

**í˜„ì¬**:
```typescript
// slack-sync.ts
title: `#${channelName} - ${userName}`  // FTS 'A' ê°€ì¤‘ì¹˜ë¥¼ ë¹„íš¨ê³¼ì ìœ¼ë¡œ ì‚¬ìš©
```

**í•´ê²° ë°©ì•ˆ** (ë‘˜ ì¤‘ í•˜ë‚˜):
1. **Option 1**: `title: null` â†’ FTSì—ì„œ title ê°€ì¤‘ì¹˜ ë¬´ì‹œ
2. **Option 2**: `title: message.text.substring(0, 100)` â†’ ë©”ì‹œì§€ ì²« 100ìë¥¼ ì œëª©ìœ¼ë¡œ

**ê¶Œì¥**: Option 2 - ë©”ì‹œì§€ ë‚´ìš©ì´ ì œëª© ê²€ìƒ‰ì— ë°˜ì˜ë¨

**ë©”íƒ€ë°ì´í„°ë¡œ ì´ë™**: `channelName`, `userName`ì€ metadataì— ì €ì¥ (í˜„ì¬ë„ ì´ë¯¸ ìˆìŒ)

---

### Wave 1-3: ê¸°ì¡´ ê³„íš ìœ ì§€

| Wave | Task | ë‚´ìš© |
|:----:|:----:|------|
| 1 | 1 | Worker: `toUpperCase()` ì œê±° + ì ˆë‹¨ 2000ì í™•ëŒ€ |
| 1 | 2 | `recency-boost.ts` ìƒì„± (14ì¼ ë°˜ê°ê¸°) |
| 2 | 3 | `text-chunker.ts` + Sync Adapter ì²­í‚¹ ì ìš© |
| 2 | 4 | Worker `/rerank` ì—”ë“œí¬ì¸íŠ¸ + `reranker.ts` |
| 3 | 5 | `local-search.ts`ì— í†µí•© + **ë°”ì´ì–´ìŠ¤ ë¡œê¹… ì¶”ê°€** |

---

### ì¶”ê°€ ê¶Œì¥: ë°”ì´ì–´ìŠ¤ ê´€ì°° ë¡œê¹…

Task 5ì— ì¶”ê°€:

```typescript
// search() í•¨ìˆ˜ ëì— ì¶”ê°€
const logBiasDistribution = (stage: string, results: SearchResult[]) => {
  const distribution = results.reduce((acc, r) => {
    acc[r.source] = (acc[r.source] || 0) + 1;
    return acc;
  }, {} as Record<string, number>);
  console.log(`[Bias:${stage}]`, distribution);
};

logBiasDistribution('semantic-top10', semanticResults.slice(0, 10));
logBiasDistribution('keyword-top10', keywordResults.slice(0, 10));
logBiasDistribution('rrf-top10', merged.slice(0, 10));
logBiasDistribution('final-top10', boosted.slice(0, 10));
```

---

## ìˆ˜ì •ëœ ì‹¤í–‰ ê³„íš ìš”ì•½

```
Wave 0 (NEW - 4ì‹œê°„)
â”œâ”€â”€ Task 0-A: Slack ê²€ìƒ‰/ë™ê¸°í™” ì¼ê´€ì„±
â”œâ”€â”€ Task 0-B: 0.3 íŒ¨ë„í‹° ì œê±°
â”œâ”€â”€ Task 0-C: ì†ŒìŠ¤ë³„ ê· í˜• í›„ë³´ ê²€ìƒ‰
â””â”€â”€ Task 0-D: Slack title ì²˜ë¦¬ ê°œì„ 

Wave 1 (ê¸°ì¡´)
â”œâ”€â”€ Task 1: Worker ìˆ˜ì •
â””â”€â”€ Task 2: RecencyBoost

Wave 2 (ê¸°ì¡´)
â”œâ”€â”€ Task 3: Chunking
â””â”€â”€ Task 4: Reranker

Wave 3 (ê¸°ì¡´ + í™•ì¥)
â””â”€â”€ Task 5: í†µí•© + ë°”ì´ì–´ìŠ¤ ë¡œê¹…
```

**ì´ ì˜ˆìƒ ì‹œê°„**: ê¸°ì¡´ 2ì¼ + 4ì‹œê°„ = ~2.5ì¼

---

## ì™¸ë¶€ ì†”ë£¨ì…˜ ê²€í†  ê²°ê³¼

| ì†”ë£¨ì…˜ | í¸ì¤‘ í•´ê²°? | ë¹„ê³  |
|--------|:---------:|------|
| Elasticsearch | âŒ | ê²€ìƒ‰ í’ˆì§ˆ â†‘, í¸ì¤‘ì€ ì§ì ‘ êµ¬í˜„ |
| Meilisearch | âŒ | ë™ì¼ |
| Cohere Rerank | âš ï¸ ë¶€ë¶„ | í’ˆì§ˆ â†‘, ê¸´ ë¬¸ì„œ ì„ í˜¸ ë¬¸ì œ ê·¸ëŒ€ë¡œ |
| LangChain | âŒ | ì¶”ìƒí™”ë§Œ ì œê³µ |

**ê²°ë¡ **: "ì†ŒìŠ¤ë³„ ê³µì •ì„±"ì€ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§** â†’ ì–´ë–¤ ë„êµ¬ë¥¼ ì¨ë„ ì§ì ‘ êµ¬í˜„ í•„ìš”

---

## ë‹¤ìŒ ë‹¨ê³„

1. ì´ ë¬¸ì„œ ê²€í† 
2. Wave 0 ë¨¼ì € ì§„í–‰í• ì§€, ê¸°ì¡´ ê³„íš ë¨¼ì € ì§„í–‰í• ì§€ ê²°ì •
3. ê³„íš í™•ì • í›„ `/start-work` ì‹¤í–‰

---

*ìµœì¢… ì—…ë°ì´íŠ¸: 2025-02-06*
*ë¶„ì„ ì°¸ì—¬: Oracle (ì•„í‚¤í…ì²˜ ìƒë‹´)*
